<!DOCTYPE html>
<html lang="zh-Hant">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>繁體中文筆順練習</title>
  <link rel="stylesheet" href="style.css">
  <script src="hanzi-writer.min.js"></script>
  <link rel="preload" href="fonts/BpmfIansui-Regular.ttf" as="font" type="font/ttf" crossorigin>
</head>

<body>
    
  <section id="home-page">
    <h1>繁體中文筆順練習</h1>
    <a href="#practice-page" class="start-button">開始練習</a>
  </section>

  <main id="practice-page">

    <div id="auth-ui">
      <button id="google-login-button" class="mode-button" style="background-color: #fa9782; color: white;">
          使用 Google 登入
      </button>
      <button id="logout-button" class="mode-button" style="background-color: #4285F4; color: white; display: none;">
          登出
      </button>
      <span id="user-status">請登入以保存你的進度。</span>
    </div>

    <h1>繁體中文筆順練習</h1>

    <div id="music-controls">
      <audio id="background-audio"></audio>
      <button id="play-pause-music-button"></button>
    </div>

    <div id="input-mode-selector">
      <button id="direct-input-mode-btn" class="mode-button"></button>
      <button id="file-input-mode-btn" class="mode-button"></button>
      <button id="level-select-mode-btn" class="mode-button"></button>
    </div>

    <div id="input-container" style="position:relative;">
      <div id="text-input-area">
        <input type="text" id="text-input" placeholder="輸入或貼上練習文字">
      </div>
      <div id="file-input-area" style="display:none;">
        <label for="file-input" class="file-input-label">點此選擇 .txt 檔案</label>
        <input type="file" id="file-input" accept=".txt">
        <span id="selected-file-name"></span>
      </div>
      <button id="process-data-button"></button>
    </div>

    <div id="level-selection-container" style="display:none;">
      <p class="subtitle">請依序選擇 版本 → 年級 → 課次</p>
      <div class="level-tier-container">
        <div class="level-selection-column" id="version-selection-area">
          <h3 class="level-selection-title">1. 選擇版本</h3>
          <div class="level-buttons-wrapper"></div>
        </div>
        <div class="level-selection-column" id="grade-selection-area" style="display: none;">
          <h3 class="level-selection-title">2. 選擇年級</h3>
          <div class="level-buttons-wrapper"></div>
        </div>
        <div class="level-selection-column" id="lesson-selection-area" style="display: none;">
          <h3 class="level-selection-title">3. 選擇課次</h3>
          <div class="level-buttons-wrapper"></div>
        </div>
      </div>
      <button id="reset-level-selection-button" style="display:none; margin-top: 15px;">重新選擇</button>
    </div>

    <div id="character-selection-buttons-container" style="display:none;">
      <p class="subtitle" id="character-select-subtitle" style="display:none;">選擇要練習的字：</p>
      <div id="character-selection-buttons">
      </div>
    </div>

    <div id="practice-mode-selector">
      <button id="normal-mode-practice-btn" class="practice-mode-button"></button>
      <button id="challenge-mode-practice-btn" class="practice-mode-button"></button>
    </div>

    <div class="display-area-container">
      <div id="animation-wrapper">
        <div id="animation-display" class="hanzi-box"></div>
        <button id="replay-animation-button" disabled></button>
      </div>
      <div id="quiz-area-wrapper">
          <div id="quiz-display" class="hanzi-box">
              <div id="reward-display-container"></div>
          </div>
          <div id="quiz-controls">
              <button id="hint-next-stroke-button" style="display: none;"></button>
          </div>
      </div>
    </div>

    <div id="practiced-characters-container">
      <h2>已練習字元</h2>
      <div id="star-count-display">
          <img src="images/star.png" alt="星星" />
          <span id="stars-earned-count">0</span>
      </div>
      <div id="practiced-characters-list">
      </div>
      <a href="#progress-page" class="progress-link-button">查看我的學習進度</a>
      <a href="#links-page" class="progress-link-button" style="background-color: #607D8B; margin-left: 10px;">外部資源</a>
    </div>

  </main>
  
  <section id="progress-page">
    <div class="progress-main-layout">
    
        <div class="progress-left-column">
            <div class="progress-container">
                <h2>學習進度總覽</h2>
                <div id="progress-char-count-display">
                    <span class="star-icon">★</span>
                    <span id="progress-char-count">0</span>
                </div>
                <p class="subtitle">累積練習字數</p>
            </div>
            <div class="progress-container">
                <h2>已通關關卡</h2>
                <div id="progress-levels-list">
                    <p class="progress-level-placeholder">尚未通過任何關卡</p>
                </div>
            </div>
        </div>

        <div class="progress-right-column">
            <div id="progress-reward-image-container">
                </div>
        </div>
        
    </div>
    <a href="#practice-page" class="back-button">返回練習</a>
  </section>
  <section id="links-page">
    <div class="links-page-content">
      <h2>外部資源連結</h2>
      <p class="subtitle">一些學習網站與工具</p>
      <div id="links-container">
        </div>
    </div>
    
    <a href="#home-page" class="back-button">返回首頁</a>
    <div id="social-links-container">
        </div>
  </section>

  <div id="congrats-overlay"></div>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-analytics-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>

  <script>
        // 你的 Firebase 配置代碼
        const firebaseConfig = {
            apiKey: "AIzaSyCtPrLtbss8CTrYHrPLrRyVjCxk2C5IVDw",
            authDomain: "hanzi-writing-dbd3f.firebaseapp.com",
            projectId: "hanzi-writing-dbd3f",
            storageBucket: "hanzi-writing-dbd3f.firebasestorage.app",
            messagingSenderId: "24075463788",
            appId: "1:24075463788:web:3f29a7e064906e816f3c49",
            measurementId: "G-3Z38C42HGW"
        };
        
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();
        const analytics = firebase.analytics();
  </script>
  <script src="data.js"></script>
  <script src="script.js"></script>

  <div style="display: none;">
        <svg id="hanzi-grid-template" xmlns="http://www.w3.org/2000/svg">
            <line x1="0" y1="0" x2="100%" y2="100%" stroke="#DDD"></line>
            <line x1="100%" y1="0" x2="0" y2="100%" stroke="#DDD"></line>
            <line x1="50%" y1="0" x2="50%" y2="100%" stroke="#DDD"></line>
            <line x1="0" y1="50%" x2="100%" y2="50%" stroke="#DDD"></line>
        </svg>
  </div>  
</body>
</html>